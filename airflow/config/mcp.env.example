# MCP (Model Context Protocol) Server Configuration
# Copy this file to .env and configure as needed

# =============================================================================
# AI Assistant MCP Server
# =============================================================================
# Enable MCP server for AI Assistant (default: false)
MCP_SERVER_ENABLED=false

# Port for AI Assistant MCP server (default: 8081)
MCP_SERVER_PORT=8081

# API key for authentication (REQUIRED if enabled)
# Generate with: openssl rand -hex 32
MCP_API_KEY=

# AI Assistant service URL
AI_SERVICE_URL=http://localhost:8080

# =============================================================================
# Airflow MCP Server
# =============================================================================
# Enable MCP server for Airflow (default: false)
AIRFLOW_MCP_ENABLED=false

# Port for Airflow MCP server (default: 8889)
AIRFLOW_MCP_PORT=8889

# API key for authentication (REQUIRED if enabled)
# Generate with: openssl rand -hex 32
AIRFLOW_MCP_API_KEY=

# =============================================================================
# MCP Tool Permissions
# =============================================================================
# Enable DAG management tools (list, trigger, status)
AIRFLOW_MCP_TOOLS_DAG_MGMT=true

# Enable VM operations tools (create, delete, list, info)
AIRFLOW_MCP_TOOLS_VM_OPS=true

# Enable log access tools
AIRFLOW_MCP_TOOLS_LOG_ACCESS=true

# Read-only mode (disable all write operations)
AIRFLOW_MCP_TOOLS_READ_ONLY=false

# =============================================================================
# Usage Examples
# =============================================================================
#
# 1. Enable MCP Servers:
#    export MCP_SERVER_ENABLED=true
#    export MCP_API_KEY=$(openssl rand -hex 32)
#    export AIRFLOW_MCP_ENABLED=true
#    export AIRFLOW_MCP_API_KEY=$(openssl rand -hex 32)
#
# 2. Connect from Claude Desktop:
#    Add to claude_desktop_config.json:
#    {
#      "mcpServers": {
#        "qubinode-airflow": {
#          "command": "npx",
#          "args": ["-y", "@modelcontextprotocol/server-http-proxy"],
#          "env": {
#            "MCP_HTTP_URL": "http://YOUR_SERVER_IP:8889",
#            "MCP_API_KEY": "your-api-key-here"
#          }
#        }
#      }
#    }
#
# 3. Read-Only Mode (safe for production):
#    export AIRFLOW_MCP_TOOLS_READ_ONLY=true
#
# =============================================================================
# Security Notes
# =============================================================================
# - MCP servers are DISABLED by default (opt-in feature)
# - Always use strong API keys in production
# - Consider using read-only mode for untrusted LLMs
# - Monitor MCP access logs for unusual activity
# - Use firewall rules to restrict access to trusted IPs
